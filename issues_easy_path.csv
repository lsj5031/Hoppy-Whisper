Title,Body,Labels,Depends On (titles),Milestone
[E0.1] Initialize Python tray app repo (Poetry + src layout),"### Acceptance Criteria
- Poetry project created for Python 3.11 with locked dependencies.
- Top-level packages: app (tray, hotkey, audio, transcriber, cleanup, history).
- README outlines quick start, hotkey, and troubleshooting steps.
- MIT license present.","epic, infra, python",,v1
"[E0.2] Code quality & tooling (Ruff, Mypy, Pre-commit)","### Acceptance Criteria
- Ruff lint rules configured; `poetry run ruff check` passes.
- Mypy (or pyright) type checks pass for core modules (allow missing imports for C-ext).
- Pre-commit hooks run ruff + formatting on commit.","infra, quality, good-first-issue",[E0.1] Initialize Python tray app repo (Poetry + src layout),v1
[E0.3] Windows CI (GitHub Actions): test + PyInstaller artifact,"### Acceptance Criteria
- CI runs on `windows-latest`, installs Poetry and dependencies.
- Unit tests and linting pass.
- PyInstaller build completes; artifact uploaded on push to main and tags.","infra, ci, release",[E0.1] Initialize Python tray app repo (Poetry + src layout),v1
[E0.4] Versioning & release workflow,"### Acceptance Criteria
- Semantic version in pyproject; changelog started.
- Tag push (v*) creates a GitHub Release with zip artifact from CI.","release, process",[E0.3] Windows CI (GitHub Actions): test + PyInstaller artifact,v1
[E1.1] System tray icon & context menu (pystray),"### Acceptance Criteria
- Tray icon appears with app name and starts minimized.
- Context menu: Toggle Recording, Settings, History, Start with Windows, Quit.
- First‑run notification explains hotkey and Shift‑to‑bypass cleanup.","ui, tray, python",[E0.1] Initialize Python tray app repo (Poetry + src layout),v1
[E1.2] Global hotkey (reliable) with paste‑window timer,"### Acceptance Criteria
- Default chord `Ctrl+Shift+;` works system‑wide when app unfocused.
- Press/hold starts recording; release stops; second press within X seconds pastes (configurable 0–5s).
- Graceful error if chord is already taken; user can change in Settings.","input, hotkey, ux",[E1.1] System tray icon & context menu (pystray),v1
[E1.3] Icon state engine (Idle/Listening/Transcribing/Copied/Pasted/Error),"### Acceptance Criteria
- State machine updates tray icon within <50 ms.
- Icon assets exist at 16/20/24/32/40/48/64 px; light/dark aware.
- Transcribing shows spinner animation or frame cycling.","ui, icons, polish",[E1.1] System tray icon & context menu (pystray),v1
[E1.4] Settings JSON + minimal UI hook,"### Acceptance Criteria
- Settings stored in %APPDATA%/<App>/config.json; schema documented.
- Editable: hotkey, paste window, auto‑paste, cleanup mode, start with Windows.
- Changes apply without restart where possible.","settings, infra",[E1.1] System tray icon & context menu (pystray),v1
[E1.5] Start with Windows (winreg),"### Acceptance Criteria
- Toggle adds/removes Run key under HKCU\...\Run.
- State displayed in menu; survives reboot.","windows, startup",[E1.1] System tray icon & context menu (pystray),v1
[E2.1] WASAPI capture @16 kHz mono (sounddevice),"### Acceptance Criteria
- Hold hotkey starts capture; release stops.
- Audio format: float32 or int16 pipeline; latency from release→buffer flush ≤80 ms.
- Device change or missing mic shows a clear error toast.","audio, performance",[E1.2] Global hotkey (reliable) with paste‑window timer,v1
[E2.2] WebRTC VAD gate (auto‑stop on trailing silence),"### Acceptance Criteria
- Trailing silence 600–900 ms auto‑stops in toggle mode.
- Background noise floor adaptation to reduce dead air.
- Idle CPU <1% when not recording.","audio, algorithm",[E2.1] WASAPI capture @16 kHz mono (sounddevice),v1
[E2.3] Temp WAV writer + PCM16 buffer utility,"### Acceptance Criteria
- Audio can be saved to temp WAV and to raw PCM16 bytes for local inference.
- Temp files are deleted after transcription unless debug mode is on.","audio, infra",[E2.1] WASAPI capture @16 kHz mono (sounddevice),v1
[E3.1] DirectML provider detection & session init,"### Acceptance Criteria
- Detect available ONNX Runtime providers and prefer DirectML; fall back to CPU.
- Session created once and reused (I/O binding if available).
- Device info exposed for diagnostics.","asr, onnx, gpu",[E0.1] Initialize Python tray app repo (Poetry + src layout),v1
[E3.2] Model asset manager (download/cache/validate),"### Acceptance Criteria
- On first run, download encoder/decoder/vocab from Hugging Face; store in %LOCALAPPDATA%/<App>/models.
- SHA256 hash check and size validation; retry/backoff on failure.
- Settings allow custom model path; English model only in v1.","asr, assets, infra",[E3.1] DirectML provider detection & session init,v1
[E3.3] Parakeet ONNX transcriber (embedded),"### Acceptance Criteria
- Load Parakeet TDT 0.6b v2 via `onnx_asr.load_model` with chosen providers.
- Transcribe WAV files produced by recorder; unit tests run on sample clips.
- Warm‑up on startup; cold start <1.5 s on mid‑range machines.","asr, integration",[E3.2] Model asset manager (download/cache/validate); [E2.3] Temp WAV writer + PCM16 buffer utility,v1
[E3.4] End‑to‑end pipeline: release → transcribe → copy,"### Acceptance Criteria
- Release hotkey triggers transcribe; text appears in console logs.
- Clipboard receives cleaned text; success toast is shown.
- Failure shows an error toast with retry suggestion.","integration, ux",[E3.3] Parakeet ONNX transcriber (embedded); [E1.2] Global hotkey (reliable) with paste‑window timer,v1
[E4.1] Smart Cleanup (rule engine) with modes,"### Acceptance Criteria
- Modes: Conservative, Standard, Rewrite.
- Preserves URLs/emails/code; removes fillers; fixes capitalization/punctuation.
- Unit tests cover provided samples and edge cases.","nlp, text, tests",[E0.1] Initialize Python tray app repo (Poetry + src layout),v1
[E4.2] Shift‑to‑bypass cleanup,"### Acceptance Criteria
- Holding Shift at paste time bypasses cleanup and uses raw ASR text.
- Behavior documented in first‑run notification and README.","ux, text",[E4.1] Smart Cleanup (rule engine) with modes,v1
[E4.3] Same‑hotkey paste window (+ auto‑paste toggle),"### Acceptance Criteria
- After copy, pressing the same hotkey within a configurable window triggers Ctrl+V.
- Optional auto‑paste immediately after copy when enabled.
- Works in Notepad, Word, Teams, Slack.","ux, clipboard",[E1.2] Global hotkey (reliable) with paste‑window timer; [E3.4] End‑to‑end pipeline: release → transcribe → copy,v1
[E5.1] SQLite store with FTS5 (utterances),"### Acceptance Criteria
- Schema: utterances(id, text, created_utc, duration_ms, mode).
- FTS5 table for text; retention window configurable (default 90 days).
- DAO with migrations and unit tests.","data, sqlite, search",[E4.1] Smart Cleanup (rule engine) with modes,v1
[E5.2] History palette (search / copy / paste),"### Acceptance Criteria
- Palette opens via hotkey (e.g., Win+Shift+Y) or tray menu.
- Type‑ahead FTS search; Enter copies; Shift+Enter pastes; Esc closes.
- Search latency <20 ms on 10k rows.","ui, search, product",[E5.1] SQLite store with FTS5 (utterances),v1
[E5.3] Export & privacy controls,"### Acceptance Criteria
- Export history to .txt/.json; Clear History with confirmation.
- Privacy page states on‑device processing and storage; telemetry OFF by default.","privacy, compliance, product",[E5.1] SQLite store with FTS5 (utterances),v1
[E6.1] Performance budgets & local metrics (opt‑in),"### Acceptance Criteria
- Startup to tray Ready ≤300 ms (model may warm in background).
- PTT release→paste ≤600 ms on DirectML GPU; ≤1.2 s on CPU for 5–7 s utterances.
- Local perf logs (opt‑in); no PII.","perf, observability",[E3.4] End‑to‑end pipeline: release → transcribe → copy,v1
[E6.2] Error handling & recovery,"### Acceptance Criteria
- Clear toasts for mic missing, hotkey conflict, model missing or download failure.
- Exponential backoff on model download retries; never crashes on device hot‑unplug.","resilience, error-handling",[E3.2] Model asset manager (download/cache/validate); [E1.2] Global hotkey (reliable) with paste‑window timer,v1
[E6.3] Accessibility & theming,"### Acceptance Criteria
- High‑contrast icon variants and keyboard navigation for menus.
- Respects OS light/dark.","a11y, ui, polish",[E1.3] Icon state engine (Idle/Listening/Transcribing/Copied/Pasted/Error),v1
[E7.1] PyInstaller spec (single‑exe with resources),"### Acceptance Criteria
- App builds to a single .exe with embedded icon resources.
- ONNXRuntime DirectML DLLs bundled; app launches on a clean VM.
- Model files resolved from %LOCALAPPDATA%/<App>/models by default.","packaging, release",[E3.3] Parakeet ONNX transcriber (embedded); [E1.1] System tray icon & context menu (pystray),v1
[E7.2] Smoke tests on clean Windows VM,"### Acceptance Criteria
- Run .exe on a fresh Windows 11 VM with no dev tools installed.
- Verify hotkey → record → transcribe → cleanup → copy/paste works.","qa, release",[E7.1] PyInstaller spec (single‑exe with resources),v1
[E7.3] Release packaging & README updates,"### Acceptance Criteria
- Upload zip to GitHub Release via CI; README includes download + first‑run notes.
- List known limitations and keyboard shortcuts.","release, docs",[E7.2] Smoke tests on clean Windows VM; [E0.4] Versioning & release workflow,v1
[E8.1] MSIX packaging around PyInstaller EXE (later),"### Acceptance Criteria
- Wrap the EXE into an MSIX with app identity and icon assets.
- App installs/uninstalls cleanly; auto‑update strategy documented.","store, msix",[E7.2] Smoke tests on clean Windows VM,v1.1
[E8.2] Windows App Certification Kit (WACK) pre‑check (later),"### Acceptance Criteria
- WACK passes with zero critical failures on the MSIX.
- Any warnings triaged with mitigations documented.","store, qa",[E8.1] MSIX packaging around PyInstaller EXE (later),v1.1
[E8.3] Store metadata & submission draft (later),"### Acceptance Criteria
- Create listing text, screenshots, privacy policy URL, microphone usage notes.
- Draft submission prepared in Partner Center (individual account).","store, content",[E8.2] Windows App Certification Kit (WACK) pre‑check (later),v1.1
